<form name="editForm" role="form" novalidate ng-submit="save()">

	<div class="panel panel-primary">
		<div class="panel-heading clearfix">
			<h3 class="panel-title pull-left">Create or edit Meter Change</h3>
		</div>
		<div class="list-group">
			<div class="list-group-item">
				<div class="modal-body">
					<jh-alert-error></jh-alert-error>
					<div class="row">
						<div class="col-sm-4 col-md-offset-4">
							<label for="field_applicationTxn">Search By CAN</label>

							<div class="form-group"
								ng-class="{ 'has-error' : editForm.field_custDetails.$invalid  && editForm.field_custDetails.$dirty}">
								<input type="text" ng-model="custInfo" typeahead-min-length="3"
									placeholder="Search CAN or Name or Address (Min 3 chars)"
									uib-typeahead="custInfo for custInfo in getLocation($viewValue)"
									typeahead-loading="loadingCANs"
									typeahead-on-select='onSelect($item, $model, $label)'
									typeahead-no-results="noResults" class="form-control">
								<i ng-show="loadingCANs" class="glyphicon glyphicon-refresh"></i>
								<div ng-show="noResults">
									<i class="glyphicon glyphicon-remove"></i> No CANs Found
								</div>
							</div>
						</div>
					</div>
					<!-- <div class="col-sm-4">
							<label for="id">ID</label> <input type="text"
								class="form-control" id="id" name="id" ng-model="meterChange.id"
								readonly />
						</div> -->
					<fieldset>
						<legend>Customer Details</legend>
						<div class="row">
							<div class="col-sm-4">
								<label class="control-label" for="field_can">CAN</label> <input
									type="text" class="form-control" name="can" id="field_can"
									ng-model="meterChange.can" readonly />
							</div>
							<div class="col-sm-4">
								<label for="name">Name</label> <input type="text"
									class="form-control" id="field_name" name="name"
									ng-model="meterChange.name" readonly />
							</div>
							<div class="col-sm-4">
								<label for="address">Address</label> <input type="text"
									class="form-control" id="field_address" name="address"
									ng-model="meterChange.address" readonly />
							</div>
						</div>
						<div class="row">
							<div class="col-sm-4">
								<label for="dma">DMA</label> <input type="text"
									class="form-control" id="field_dma" name="dma"
									ng-model="meterChange.custDetails.divCode" readonly />
							</div>
							<div class="col-sm-4">
								<label for="street">Street</label> <input type="text"
									class="form-control" id="field_street" name="street"
									ng-model="meterChange.custDetails.secCode" readonly />
							</div>
							<!-- <div class="col-sm-4">
								<label for="field_custDetails">Cust Details</label> <select
									class="form-control" id="field_custDetails" name="custDetails"
									ng-model="meterChange.custDetails"
									ng-options="custDetails as custDetails.mobileNo for custDetails in custdetailss track by custDetails.id">
									<option value=""></option>
								</select>
							</div> -->
						</div>
					</fieldset>
					<fieldset>
						<legend>Meter Details</legend>
						<div class="row">
							<!-- <div class="col-sm-4">
								<label class="control-label" for="field_existingMeterNumber">Existing
									Meter Number</label> <input type="text" class="form-control"
									name="existingMeterNumber" id="field_existingMeterNumber"
									ng-model="meterChange.existingMeterNumber" readonly />
							</div> -->
							<div class="col-sm-4">
								<label for="field_existingMeterNumber">Existing Meter Number</label> <select
									class="form-control" id="field_prevMeterNo"
									name="prevMeterNo" ng-model="meterChange.prevMeterNo"
									ng-options="meterDetails as meterDetails.meterId for meterDetails in prevMeterDetailss track by meterDetails.id"
									required disabled>
									<option value=""></option>
								</select>
							</div>
							<div class="col-sm-4">
								<label class="control-label" for="field_prevMeterReading">Existing
									Meter Reading</label> <input type="number" class="form-control"
									name="prevMeterReading" id="field_prevMeterReading"
									ng-model="meterChange.prevMeterReading" required />
							</div>
							<div class="col-sm-4">
								<label class="control-label" for="field_reasonForChange">Reason
									For Change</label>
								<!-- <input type="text" class="form-control"
								name="reasonForChange" id="field_reasonForChange"
								ng-model="meterChange.reasonForChange" /> -->
								<select class="form-control" id="field_reasonForChange"
									name="reasonForChange" ng-model="meterChange.reasonForChange1"
									ng-change="getReason(meterChange.reasonForChange1.status)"
									ng-options="meterChangeStatus as meterChangeStatus.status for meterChangeStatus in meterChangeStatuss track by meterChangeStatus.status"
									required>
									<option value=""></option>
								</select>
							</div>
						</div>
						<br>
						<div class="row">
							<div class="col-sm-4">
								<label for="field_newMeterNo">New Meter Number</label> <select
									class="form-control" id="field_newMeterNo"
									name="newMeterNo" ng-model="meterChange.newMeterNo"
									ng-options="meterDetails as meterDetails.meterId for meterDetails in meterdetailss track by meterDetails.id"
									required>
									<option value=""></option>
								</select>
							</div>
							<!-- <div class="col-sm-4">
								<label class="control-label" for="field_newMeterNumber">New
									Meter Number</label> <input type="text" class="form-control"
									name="newMeterNumber" id="field_newMeterNumber"
									ng-model="meterChange.newMeterNumber" required/>
							</div> -->
							<div class="col-sm-4">
								<label class="control-label" for="field_newMeterReading">New
									Meter Reading</label> <input type="number" class="form-control"
									name="newMeterReading" id="field_newMeterReading"
									ng-model="meterChange.newMeterReading" required/>
							</div>
						</div>
					</fieldset>
					<fieldset>
						<legend>Approval Details</legend>
						<div class="row">
							<div class="col-sm-4">
								<label for="field_user">Approved By</label> <select
									class="form-control" id="field_user" name="user"
									ng-model="meterChange.user"
									ng-options="user as user.login +'-'+ user.firstName+' '+user.lastName for user in users" required>
									<option value=""></option>
								</select>
							</div>
							<div class="col-sm-4">
								<label class="control-label" for="field_remarks">Remarks</label>
								<input type="text" class="form-control" name="remarks"
									id="field_remarks" ng-model="meterChange.remarks" required/>
							</div>
							<div class="col-sm-4">
								<label class="control-label" for="field_approvedDate">Approved
									Date</label>
								<div class="form-group">
									<div class='input-group date' id='field_approvedDate'>
										<input id="field_approvedDate" type="text"
											class="form-control" uib-datepicker-popup="{{dateformat}}"
											ng-model="meterChange.approvedDate"
											is-open="datePickerForApprovedDate.status.opened" required/> <span
											class="input-group-btn">
											<button type="button" class="btn btn-default"
												ng-click="datePickerForApprovedDateOpen($event)">
												<i class="glyphicon glyphicon-calendar"></i>
											</button>
										</span>
									</div>
								</div>
							</div>
						</div>
					</fieldset>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal"
						ng-click="clear()">
						<span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span>Cancel</span>
					</button>  
					<button type="submit" ng-disabled="editForm.$invalid || isSaving"
						class="btn btn-primary">
						<span class="glyphicon glyphicon-save"></span>&nbsp;<span>Save</span>
					</button>
				</div>
			</div>
		</div>
	</div>
</form>
