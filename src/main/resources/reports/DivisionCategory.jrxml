<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="DivisionCategory" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="b0cea42c-e501-44a4-b2f6-3cb597322996">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<queryString>
		<![CDATA[select case when div_code1 = "" then "" else (select division_name from division_master where division_code = div_code1) end division_name,ifnull(tcm.tariff_category,'') tariff_category,meter_details_id metering_status,count from (
select  concat(div_code,'-',tariff_category_master_id1,'-',meter_details_id1,'-', level) sort_code,  case when level = 1 then div_code else '' end div_code1, case when level = 2 then tariff_category_master_id1 else '' end t, case when meter_details_id1 ='0' then '' else meter_details_id1 end meter_details_id, count from
(
select 3 level, div_code,tariff_category_master_id tariff_category_master_id1, case when meter_details_id is null then 'U' else 'M' end meter_details_id1, count(*) count from cust_details c where c.status="ACTIVE" group by level, div_code,tariff_category_master_id1, meter_details_id1
union
select 2 level, div_code,tariff_category_master_id tariff_category_master_id1, '0' meter_details_id1, count(*) count from cust_details c where c.status="ACTIVE" group by level, div_code,tariff_category_master_id1, meter_details_id1
union
select 1 level, div_code, '0' tariff_category_master_id1, '0' meter_details_id1, count(*) count from cust_details c where c.status="ACTIVE" group by level, div_code,tariff_category_master_id1, meter_details_id1
) a
) b left join tariff_category_master tcm
on b.t = tcm.id
order by  sort_code]]>
	</queryString>
	<field name="division_name" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tariff_category" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="metering_status" class="java.lang.String"/>
	<field name="count" class="java.lang.Long"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="45" splitType="Stretch">
			<staticText>
				<reportElement x="212" y="10" width="412" height="34" uuid="f8670c12-7409-4d1f-a3a4-887e34d3e423"/>
				<textElement>
					<font size="22" isBold="true"/>
				</textElement>
				<text><![CDATA[NUMBER OF  CATEGORY MASTERS]]></text>
			</staticText>
		</band>
	</title>
	<pageHeader>
		<band height="3" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="61" splitType="Stretch">
			<staticText>
				<reportElement x="175" y="33" width="152" height="28" uuid="1c43ef7e-6cdf-4a18-964e-c0eec9cfa5f8"/>
				<textElement>
					<font size="18"/>
				</textElement>
				<text><![CDATA[Category Masters]]></text>
			</staticText>
			<staticText>
				<reportElement x="2" y="33" width="144" height="28" uuid="1f2543e2-ca79-44cb-a9a0-bcff665fbd36"/>
				<textElement>
					<font size="18"/>
				</textElement>
				<text><![CDATA[Division Masters]]></text>
			</staticText>
			<staticText>
				<reportElement x="710" y="33" width="67" height="28" uuid="7ea9cdda-07cb-4ed6-a763-d959a945cd87"/>
				<textElement>
					<font size="18"/>
				</textElement>
				<text><![CDATA[Total ]]></text>
			</staticText>
			<staticText>
				<reportElement x="404" y="33" width="88" height="28" uuid="10f91762-20b4-4388-8cad-cb5993e18034"/>
				<textElement>
					<font size="18" isBold="true"/>
				</textElement>
				<text><![CDATA[Category]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="64" splitType="Stretch">
			<textField isBlankWhenNull="true">
				<reportElement x="17" y="16" width="118" height="20" uuid="8ad4692d-944f-4bfd-a4cc-cc1ff2b812ff"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{division_name}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="175" y="44" width="206" height="20" uuid="d6a1579f-15b1-432d-9797-638125065418"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tariff_category}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="394" y="40" width="230" height="20" uuid="4845ef0d-681a-447c-b5aa-44d41c59d4d0"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{metering_status}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="692" y="24" width="100" height="20" uuid="3ba028d8-3b3f-4543-92c6-5ed29f8bb4c4"/>
				<textElement>
					<font size="12"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{count}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
